{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ada\\\\Documents\\\\GitHub\\\\Urheilija2\\\\reactfrontend\\\\src\\\\context\\\\GlobalContext.js\";\nimport React, { Component } from \"react\";\nimport Cookies from \"js-cookie\";\nimport Data from \"./Data\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/React.createContext();\nexport class Provider extends Component {\n  constructor() {\n    super();\n    this.state = {\n      authenticatedUser: Cookies.getJSON(\"authenticatedUser\") || null\n    };\n    /**\r\n     * Signs the user in by retrieving the user's details, setting the authenticatedUser state and browser cookies\r\n     * @param {String} emailAddress\r\n     * @param {String} password\r\n     * @returns {Object} user\r\n     */\n    this.signIn = async (emailAddress, password) => {\n      const user = await this.data.getUser(emailAddress, password);\n      if (user !== null && user.id) {\n        this.setState(() => {\n          return {\n            authenticatedUser: {\n              ...user,\n              ...{\n                password\n              }\n            }\n          };\n        });\n        Cookies.set(\"authenticatedUser\", JSON.stringify(this.state.authenticatedUser), {\n          expires: 1\n        });\n      }\n      return user;\n    };\n    /**\r\n     * Signs the user out by setting a null authenticated user and removing cookies\r\n     */\n    this.signOut = () => {\n      this.setState({\n        authenticatedUser: null\n      });\n      Cookies.remove(\"authenticatedUser\");\n    };\n    this.data = new Data();\n  }\n  render() {\n    const {\n      authenticatedUser\n    } = this.state;\n    const value = {\n      authenticatedUser,\n      data: this.data,\n      actions: {\n        signIn: this.signIn,\n        signOut: this.signOut\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(Context.Provider, {\n      value: value,\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport const Consumer = Context.Consumer;\n\n/**\r\n * A higher-order component that wraps the provided component in a Context Consumer component.\r\n * @param {class} Component - A React component.\r\n * @returns {function} A higher-order component.\r\n */\nexport function withContext(Component) {\n  return function ContextComponent(props) {\n    return /*#__PURE__*/_jsxDEV(Context.Consumer, {\n      children: context => /*#__PURE__*/_jsxDEV(Component, {\n        ...props,\n        context: context\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this);\n  };\n}\nconst contextObjects = {\n  withContext,\n  Context\n};\nexport default contextObjects;","map":{"version":3,"names":["React","Component","Cookies","Data","jsxDEV","_jsxDEV","Context","createContext","Provider","constructor","state","authenticatedUser","getJSON","signIn","emailAddress","password","user","data","getUser","id","setState","set","JSON","stringify","expires","signOut","remove","render","value","actions","children","props","fileName","_jsxFileName","lineNumber","columnNumber","Consumer","withContext","ContextComponent","context","contextObjects"],"sources":["C:/Users/Ada/Documents/GitHub/Urheilija2/reactfrontend/src/context/GlobalContext.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport Cookies from \"js-cookie\";\r\nimport Data from \"./Data\";\r\n\r\nconst Context = React.createContext();\r\n\r\nexport class Provider extends Component {\r\n  state = {\r\n    authenticatedUser: Cookies.getJSON(\"authenticatedUser\") || null,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.data = new Data();\r\n  }\r\n\r\n  render() {\r\n    const { authenticatedUser } = this.state;\r\n    const value = {\r\n      authenticatedUser,\r\n      data: this.data,\r\n      actions: {\r\n        signIn: this.signIn,\r\n        signOut: this.signOut,\r\n      },\r\n    };\r\n    return (\r\n      <Context.Provider value={value}>{this.props.children}</Context.Provider>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Signs the user in by retrieving the user's details, setting the authenticatedUser state and browser cookies\r\n   * @param {String} emailAddress\r\n   * @param {String} password\r\n   * @returns {Object} user\r\n   */\r\n  signIn = async (emailAddress, password) => {\r\n    const user = await this.data.getUser(emailAddress, password);\r\n    if (user !== null && user.id) {\r\n      this.setState(() => {\r\n        return {\r\n          authenticatedUser: { ...user, ...{ password } },\r\n        };\r\n      });\r\n      Cookies.set(\r\n        \"authenticatedUser\",\r\n        JSON.stringify(this.state.authenticatedUser),\r\n        { expires: 1 }\r\n      );\r\n    }\r\n    return user;\r\n  };\r\n\r\n  /**\r\n   * Signs the user out by setting a null authenticated user and removing cookies\r\n   */\r\n  signOut = () => {\r\n    this.setState({ authenticatedUser: null });\r\n    Cookies.remove(\"authenticatedUser\");\r\n  };\r\n}\r\n\r\nexport const Consumer = Context.Consumer;\r\n\r\n/**\r\n * A higher-order component that wraps the provided component in a Context Consumer component.\r\n * @param {class} Component - A React component.\r\n * @returns {function} A higher-order component.\r\n */\r\nexport function withContext(Component) {\r\n  return function ContextComponent(props) {\r\n    return (\r\n      <Context.Consumer>\r\n        {(context) => <Component {...props} context={context} />}\r\n      </Context.Consumer>\r\n    );\r\n  };\r\n}\r\n\r\nconst contextObjects = { withContext, Context };\r\nexport default contextObjects;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,IAAI,MAAM,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,OAAO,gBAAGN,KAAK,CAACO,aAAa,CAAC,CAAC;AAErC,OAAO,MAAMC,QAAQ,SAASP,SAAS,CAAC;EAKtCQ,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC;IAAC,KALVC,KAAK,GAAG;MACNC,iBAAiB,EAAET,OAAO,CAACU,OAAO,CAAC,mBAAmB,CAAC,IAAI;IAC7D,CAAC;IAsBD;AACF;AACA;AACA;AACA;AACA;IALE,KAMAC,MAAM,GAAG,OAAOC,YAAY,EAAEC,QAAQ,KAAK;MACzC,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACC,IAAI,CAACC,OAAO,CAACJ,YAAY,EAAEC,QAAQ,CAAC;MAC5D,IAAIC,IAAI,KAAK,IAAI,IAAIA,IAAI,CAACG,EAAE,EAAE;QAC5B,IAAI,CAACC,QAAQ,CAAC,MAAM;UAClB,OAAO;YACLT,iBAAiB,EAAE;cAAE,GAAGK,IAAI;cAAE,GAAG;gBAAED;cAAS;YAAE;UAChD,CAAC;QACH,CAAC,CAAC;QACFb,OAAO,CAACmB,GAAG,CACT,mBAAmB,EACnBC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACb,KAAK,CAACC,iBAAiB,CAAC,EAC5C;UAAEa,OAAO,EAAE;QAAE,CACf,CAAC;MACH;MACA,OAAOR,IAAI;IACb,CAAC;IAED;AACF;AACA;IAFE,KAGAS,OAAO,GAAG,MAAM;MACd,IAAI,CAACL,QAAQ,CAAC;QAAET,iBAAiB,EAAE;MAAK,CAAC,CAAC;MAC1CT,OAAO,CAACwB,MAAM,CAAC,mBAAmB,CAAC;IACrC,CAAC;IA/CC,IAAI,CAACT,IAAI,GAAG,IAAId,IAAI,CAAC,CAAC;EACxB;EAEAwB,MAAMA,CAAA,EAAG;IACP,MAAM;MAAEhB;IAAkB,CAAC,GAAG,IAAI,CAACD,KAAK;IACxC,MAAMkB,KAAK,GAAG;MACZjB,iBAAiB;MACjBM,IAAI,EAAE,IAAI,CAACA,IAAI;MACfY,OAAO,EAAE;QACPhB,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBY,OAAO,EAAE,IAAI,CAACA;MAChB;IACF,CAAC;IACD,oBACEpB,OAAA,CAACC,OAAO,CAACE,QAAQ;MAACoB,KAAK,EAAEA,KAAM;MAAAE,QAAA,EAAE,IAAI,CAACC,KAAK,CAACD;IAAQ;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAmB,CAAC;EAE5E;AAgCF;AAEA,OAAO,MAAMC,QAAQ,GAAG9B,OAAO,CAAC8B,QAAQ;;AAExC;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAACpC,SAAS,EAAE;EACrC,OAAO,SAASqC,gBAAgBA,CAACP,KAAK,EAAE;IACtC,oBACE1B,OAAA,CAACC,OAAO,CAAC8B,QAAQ;MAAAN,QAAA,EACbS,OAAO,iBAAKlC,OAAA,CAACJ,SAAS;QAAA,GAAK8B,KAAK;QAAEQ,OAAO,EAAEA;MAAQ;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxC,CAAC;EAEvB,CAAC;AACH;AAEA,MAAMK,cAAc,GAAG;EAAEH,WAAW;EAAE/B;AAAQ,CAAC;AAC/C,eAAekC,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}